<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="액티비티 중복문제, 인텐트 객체 전달" /><meta name="author" content="seyoung" /><meta property="og:locale" content="en" /><meta name="description" content="액티비티 중복 문제 액티비티로 만든 화면이 한 번 메모리에 만들어 졌는데도 계속 startActivity나 startActivityForResult 메서드를" /><meta property="og:description" content="액티비티 중복 문제 액티비티로 만든 화면이 한 번 메모리에 만들어 졌는데도 계속 startActivity나 startActivityForResult 메서드를" /><link rel="canonical" href="https://sey2.github.io/posts/Flag-ExtraData/" /><meta property="og:url" content="https://sey2.github.io/posts/Flag-ExtraData/" /><meta property="og:site_name" content="Se Young" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-07T22:14:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="액티비티 중복문제, 인텐트 객체 전달" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@seyoung" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"seyoung"},"dateModified":"2022-01-07T22:14:00+09:00","datePublished":"2022-01-07T22:14:00+09:00","description":"액티비티 중복 문제 액티비티로 만든 화면이 한 번 메모리에 만들어 졌는데도 계속 startActivity나 startActivityForResult 메서드를","headline":"액티비티 중복문제, 인텐트 객체 전달","mainEntityOfPage":{"@type":"WebPage","@id":"https://sey2.github.io/posts/Flag-ExtraData/"},"url":"https://sey2.github.io/posts/Flag-ExtraData/"}</script><title>액티비티 중복문제, 인텐트 객체 전달 | Se Young</title><link rel="apple-touch-icon" sizes="200x200" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="42x42" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="26x26" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Se Young"><meta name="application-name" content="Se Young"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/profile.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Se Young</a></div><div class="site-subtitle font-italic">CS, Android, etc .. diary</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/sey2" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['casio2978','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>액티비티 중복문제, 인텐트 객체 전달</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>액티비티 중복문제, 인텐트 객체 전달</h1><div class="post-meta text-muted"><div> By <em> <a href="https://instagram.com/casio2978">Se Young Park</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-01-07 22:14:00 +0900" data-toggle="tooltip" data-placement="bottom" title="Fri, Jan 7, 2022, 10:14 PM +0900" >Jan 7, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2065 words"> <em>11 min</em> read</span></div></div></div><div class="post-content"><h2 id="액티비티-중복-문제">액티비티 중복 문제<a href="#액티비티-중복-문제" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>액티비티로 만든 화면이 한 번 메모리에 만들어 졌는데도 계속 startActivity나 startActivityForResult 메서드를</p><p>여러번 호출하면 메모리에 동일한 액티비티가 여러개 만들어진다.</p><p>왜냐하면 시스템이 인텐트별로 새 액티비티를 띄워주기 때문이다.</p><p>만약 같은 액티비티에 대해 인텐트를 두 번 보내면 중복된 액티비티가 뜨게 된다.</p><p>중복된 액티비티가 띄워지지 않게 할려면 어떻게 해야할까?</p><p>이럴 때 사용하는게 바로 플래그이다.</p><h2 id="플래그">플래그<a href="#플래그" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>플래그를 이해하기 전에 액티비티가 처리되는 방식을 알아보자.</p><p><strong>액티비티는 액티비티 매니저(Activity Manager)라는 객체에 의해 액티비티 스택(Acticity Stack)이 관리된다.</strong></p><p>액티비티 스택은 액티비티를 차곡차곡 쌓아두었다가 가장 상위에 있던 액티비티가 없어지면</p><p>이전의 액티비티가 다시 화면에 보이게 된다.</p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 600 450'%3E%3C/svg%3E" data-src="https://user-images.githubusercontent.com/54762273/148550562-99e6b8d2-453c-4ef6-ab8d-0ebca421a1ce.png" width="600" height="450" data-proofer-ignore/></p><p>새로운 액티비티를 만들어 매니페스트 파일에 등록하면 그 액티비티 startActivity 또는 startActivityForReuslt</p><p>메서드를 사용해 실행된다. 이렇게 실행된 액티비티는 화면에 띄워지고 새로운 액티비티가 화면에 띄워지면</p><p>이전에 있던 액티비티는 스택에 저장되고 새로운 액티비티가 화면에 보이는 구조이다.</p><p>이렇게 일반적인 스택 구조를 이용해 액티비티가 관리되는데 동일한 액티비티를 여러 번 실행하게 되면,</p><p>동일한 액티비티가 여러 개 스택에 들어가게 되고 동시에 데이터를 여러 번 접근하거나 리소스를 여러 번</p><p>사용하는 문제가 발생할 수 있다. 이러한 문제를 해결할 수 있는게 플래그이다.</p><p>대표적인 플래그는 아래와 같다.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center">플래그<th style="text-align: center">설명<tbody><tr><td style="text-align: center">FLAG_ACTIVITY_SINGLE_TOP<td style="text-align: center">이미 생성된 액티비티가 있으면, 그 액티비티를 그대로 사용하는 플래그<tr><td style="text-align: center">FLAG_ACTIVITY_NO_HISTORY<td style="text-align: center">처음 이후에 실행되는 Activity는 스택에 들어가지 않음 (알람 같은거)<tr><td style="text-align: center">FLAG_ACTIVITY_CLEAR_TOP<td style="text-align: center">현재 Activity 이외 Activity는 모두 종료</table></div><p><br /></p><p><img data-src="https://user-images.githubusercontent.com/54762273/148553000-ac952b79-382d-4ec5-a32b-05bed18b431f.png" alt="1" data-proofer-ignore/></p><p><img data-src="https://user-images.githubusercontent.com/54762273/148553108-28adcb23-9ab8-4538-bd99-a3c1e9ecabb9.png" alt="2" data-proofer-ignore/></p><p><img data-src="https://user-images.githubusercontent.com/54762273/148553037-c055bd68-c768-4472-93cb-2918345ec7d0.png" alt="3" data-proofer-ignore/></p><hr /><p><strong>액티비티가 새로 만들어지지 않고 재사용된다면 액티비티의 onCreate 메서드가 호출되지 않는다.</strong></p><p>이 경우에는 새로 띄워지는 액티비티에서 인텐트를 전달 받아 처리하는 방법이 따로 있어야 한다.</p><p>그것이 바로 <strong>onNewIntent</strong> 메서드이다.</p><p>이 메서드를 재정의하면 액티비티가 새로 만들어지지 않았을 때 인텐트 객체만 전달 받을 수 있다.</p><p><br /></p><h2 id="부가데이터">부가데이터<a href="#부가데이터" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>한 액티비티에서 다른 액티비티를 띄울 때 데이터를 전달해야 하는 경우가 있다.</p><p>예를 들어, 로그인 화면에서 로그인 버튼을 눌러 로그인을 성공하면 메뉴 화면으로 아이디를</p><p>전달하여 표시해야 할 수도 있다.</p><p>어떻게 하면 로그인 화면에서 메뉴 화면으로 아이디를 전달할 수 있을까?</p><p>가장 간단한 방법은 별도의 클래스를 만든 다음 그 안에 클래스 변수를 만들어 두 개의 화면에서</p><p>모두 그 변수를 참조하게 하는 방법이다.</p><p>즉, 로그인 화면에서 값을 설정하고 메뉴 화면에서 로그인 화면의 변수 값을 참조하면 된다.</p><p>하지만 이 경우 다른 앱에서 우리가 만든 화면을 띄울 수도 있기 떄문에 변수를 공유하는 방식으로</p><p>데이터를 전달하는 것이 불가능할 수도 있다.</p><p>따라서 <strong>기본적으로 액티비티를 띄울 때 전달되는 인텐트 안에</strong></p><p><strong>부가 데이터(Extra data)를 넣어 전달하는 방법을 권장한다.</strong></p><p>인텐트 안에는 번들(Bundle) 객체가 들어 있는데, 번들 객체는 해시테이블과 유사해서</p><p>putExtra와 get-기본 자료형 이름Extra 메서드로 데이터를 넣거나 빼낼 수 있다.</p><p>예를 들어 문자열을 넣고 싶을 때는 putExtra 메서드를 호출하고,</p><p>문자열을 다시 빼내고 싶을때는 getStringExtra 메서드를 이용하면된다.</p><p>또한, getOOO() 형태를 가진 메서드는 데이터 값이 없으면 디폴트로 설정한 defaultValue 값이 반환된다.</p><p>전달하고 싶은 데이터가 객체인 경우에는 객체 자체를 전달 할 순 없고, 객체 데이터를 바이트 배열로</p><p>변환하거나 Serializable 인터페이스를 구현하는 객체를 만들어 직렬화한 다음 전달 해야한다.</p><p>하지만 안드로이드에서는 Serializable 인터페이스와 유사한 Parcelable 인터페이스를 권장한다.</p><p>Parcelable 인터페이스는 직렬화 했을 때 크기가 작아 안드로이드 내부의 데이터 전달에 자주 사용된다.</p><p>이 인터페이스를 사용하려면 아래의 두 가지 메서드를 모두 구현해야 한다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">int</span> <span class="nf">describleContents</span><span class="o">()</span>		<span class="c1">// 객체의 유형을 구분할 때 사용</span>

<span class="cm">/* 객체가 가지고 있는 데이터를 Parcel 객체로 만들어주는 역할 */</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">writeToParcel</span><span class="o">(</span><span class="nc">Parcel</span> <span class="n">dest</span><span class="o">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="o">)</span>		
</pre></table></code></div></div><p>위 두가지 메소드를 다 구현한 다음에는 CREATOR라는 상수를 만들어야 한다.</p><p>CREATOR 상수는 Parcel 객체로부터 데이터를 읽어 들여 객체를 생성하는 역할을 한다.</p><hr /><h3 id="parcelable-예제">Parcelable 예제<a href="#parcelable-예제" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>java 파일 프로젝트에 폴더에 class 하나를 아래와 같이 추가해준다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleData</span> <span class="kd">implements</span> <span class="nc">Parcelable</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">number</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">message</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">SimpleData</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">,</span> <span class="nc">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">num</span><span class="o">;</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">msg</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/* Parcel 객체에서 읽기 */</span>
    <span class="kd">public</span> <span class="nf">SimpleData</span><span class="o">(</span><span class="nc">Parcel</span> <span class="n">src</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">number</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="na">readInt</span><span class="o">();</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="na">readString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="cm">/* Creator 상수 정의 */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Creator</span> <span class="no">CREATOR</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Creator</span><span class="o">()</span> <span class="o">{</span>

        <span class="kd">public</span> <span class="nc">SimpleData</span> <span class="nf">createFromParcel</span><span class="o">(</span><span class="nc">Parcel</span> <span class="n">in</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">SimpleData</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="nc">SimpleData</span><span class="o">[]</span> <span class="nf">newArray</span><span class="o">(</span><span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nc">SimpleData</span><span class="o">[</span><span class="n">size</span><span class="o">];</span>
        <span class="o">}</span>

    <span class="o">};</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">describeContents</span><span class="o">(){</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="cm">/* Parcel 객체로 쓰기 */</span>
    <span class="cm">/* Simple Data 객체 안에 있는 데이터를 Parcel 객체로 만드는 역할을 한다*/</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeToParcel</span><span class="o">(</span><span class="nc">Parcel</span> <span class="n">dest</span><span class="o">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="o">){</span>
        <span class="n">dest</span><span class="o">.</span><span class="na">writeInt</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
        <span class="n">dest</span><span class="o">.</span><span class="na">writeString</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>MainActivity.java 코드를 수정한다.</strong></p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="nc">AppCompatActivity</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">REQUEST_CODE_MENU</span> <span class="o">=</span> <span class="mi">101</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">KEY_SIMPLE_DATA</span> <span class="o">=</span> <span class="s">"data"</span><span class="o">;</span>
    
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
        <span class="nc">Button</span> <span class="n">button</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">button</span><span class="o">);</span>
        <span class="n">button</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">((</span><span class="n">v</span><span class="o">)-&gt;{</span>
            <span class="nc">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Intent</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span><span class="nc">MenuActivity</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
            <span class="nc">SimpleData</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleData</span><span class="o">(</span><span class="mi">100</span><span class="o">,</span> <span class="s">"Hello Android"</span><span class="o">);</span>
            <span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="no">KEY_SIMPLE_DATA</span><span class="o">,</span><span class="n">data</span><span class="o">);</span>
            <span class="n">startActivityForResult</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span><span class="no">REQUEST_CODE_MENU</span><span class="o">);</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>MenuActivity.java 코드를 수정한다.</strong></p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MenuActivity</span> <span class="kd">extends</span> <span class="nc">AppCompatActivity</span> <span class="o">{</span>
    <span class="nc">TextView</span> <span class="n">textView</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">KEY_SIMPLE_DATA</span> <span class="o">=</span> <span class="s">"data"</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_menu</span><span class="o">);</span>

        <span class="n">textView</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">textView</span><span class="o">);</span>
        <span class="nc">Button</span> <span class="n">button</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">button2</span><span class="o">);</span>
        <span class="n">button</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">((</span><span class="n">v</span><span class="o">)-&gt;{</span>
            <span class="nc">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Intent</span><span class="o">();</span>
            <span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span><span class="s">"mike"</span><span class="o">);</span>
            <span class="n">setResult</span><span class="o">(</span><span class="no">RESULT_OK</span><span class="o">,</span><span class="n">intent</span><span class="o">);</span>

            <span class="n">finish</span><span class="o">();</span>
        <span class="o">});</span>

        <span class="c1">// 메인 액티비티로부터 전달 받은 인텐트 참조</span>
        <span class="nc">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="n">getIntent</span><span class="o">();</span>
        <span class="n">processIntent</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">processIntent</span><span class="o">(</span><span class="nc">Intent</span> <span class="n">intent</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">intent</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
            <span class="c1">// getExtras() -&gt; 번들 객체 반환</span>
            <span class="nc">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getExtras</span><span class="o">();</span>
            
            <span class="cm">/* 번들 객체 안에 SimpleData 객체가 들어 있으므로  getParcelable 메서드로
                객체를 참조한다. */</span>
            <span class="nc">SimpleData</span> <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="na">getParcelable</span><span class="o">(</span><span class="no">KEY_SIMPLE_DATA</span><span class="o">);</span>
            <span class="k">if</span><span class="o">(</span><span class="n">intent</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                <span class="n">textView</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">"전달 받은 데이터\n Number : "</span> <span class="o">+</span> <span class="n">data</span><span class="o">.</span><span class="na">number</span> <span class="o">+</span>
                        <span class="s">" \nMessage : "</span> <span class="o">+</span> <span class="n">data</span><span class="o">.</span><span class="na">message</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><hr /><p><strong>결과</strong></p><p><img data-src="https://user-images.githubusercontent.com/54762273/148561904-5cc19e5f-cba5-4995-81f6-7e1b61950a97.gif" alt="ezgif com-gif-maker" data-proofer-ignore/></p><p>이렇게 Parcelable 인터페이스를 사용하면 객체를 정의해 데이터를 전달할 수 있으므로 코드가</p><p>좀 더 단순해지고 재사용성이 높아지는 장점이 생기게 된다.</p><p>하지만 데이터를 담아둘 새로운 객체를 일일이 정의하는 것이 번거롭다는 단점이 있다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/android/'>Android</a>, <a href='/categories/appcomponents/'>AppComponents</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/android/" class="post-tag no-text-decoration" >android</a> <a href="/tags/flag/" class="post-tag no-text-decoration" >flag</a> <a href="/tags/extradata/" class="post-tag no-text-decoration" >extradata</a> <a href="/tags/parcelable/" class="post-tag no-text-decoration" >parcelable</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=액티비티 중복문제, 인텐트 객체 전달 - Se Young&url=https://sey2.github.io/posts/Flag-ExtraData/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=액티비티 중복문제, 인텐트 객체 전달 - Se Young&u=https://sey2.github.io/posts/Flag-ExtraData/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=액티비티 중복문제, 인텐트 객체 전달 - Se Young&url=https://sey2.github.io/posts/Flag-ExtraData/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="sey2/sey2.github.io" issue-term="pathname" theme="github-dark" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/basic4/">코틀린 기본 문법 (함수)</a><li><a href="/posts/back-13565/">백준 침투</a><li><a href="/posts/back-18352/">특정 거리의 도시 찾기 (18352)</a><li><a href="/posts/programmers-exam/">프로그래머스 모의고사</a><li><a href="/posts/programmers-rotto/">프로그래머스 로또의 최고 순위와 최저 순위</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/BroadCast/"><div class="card-body"> <em class="timeago small" date="2022-01-11 12:50:00 +0900" >Jan 11, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Broad Cast Receiver</h3><div class="text-muted small"><p> Broadcast 안드로이드에서 브로드캐스팅 (BroadCasting)이란 메시지를 여러 객체에 전달하는 것을 말한다. 예를 들어 카카오톡에서 여러 사람에게 메시지를 전달할 때 그룹 채팅방을 만들어 메시지를 전달하는것을 생각해보자. 마찬가지로 안드로이드도 여러 앱 구성 요소에 메시지를 전달할 때 브로드 캐스팅을 사용한다. 우리가 만든 앱에서 ...</p></div></div></a></div><div class="card"> <a href="/posts/SeystemService/"><div class="card-body"> <em class="timeago small" date="2022-02-07 03:18:00 +0900" >Feb 7, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>시스템 서비스 활용하기</h3><div class="text-muted small"><p> 시스템 서비스 활용하기 시스템 서비스 (System Service)는 단말이 켜졌을 때 자동으로 실행되어 백그라운드에서 동작한다. 이런 시스템 서비스 중에 인플레이션을 위한 시스템 서비스나 센서를 위한 시스템 서비스 등을 포스팅 했다. 안드로이드에서는 다양한 시스템 서비스가 제공되는데 그 중에서 ActivityManager, PackageManag...</p></div></div></a></div><div class="card"> <a href="/posts/Jetpack/"><div class="card-body"> <em class="timeago small" date="2022-02-19 05:48:00 +0900" >Feb 19, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>JetPack이란?</h3><div class="text-muted small"><p> JetPack Jetpack이란 github 안드로이드 프로젝트를 구경하다 보면 Jetpack이라는 단어가 종종 보인다. 책에서는 구경도 못한 단어여서 정리를 해보고자 한다. Jetpack은 2018년 5월 8일에 구글이 발표한 라이브러리 도구 모음 집이다. 앱을 개발을 쉽고 빠르게 도와주는 라이브러리와 도구를 모아둔 것 이다. Jetp...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Intent/" class="btn btn-outline-primary" prompt="Older"><p>Intent</p></a> <a href="/posts/LifeCycle/" class="btn btn-outline-primary" prompt="Newer"><p>Activity Life Cycle</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://instagram.com/casio2978">Se Young Park</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/backjoon/">backjoon</a> <a class="post-tag" href="/tags/layout/">layout</a> <a class="post-tag" href="/tags/bfs/">BFS</a> <a class="post-tag" href="/tags/dfs/">DFS</a> <a class="post-tag" href="/tags/programmers/">programmers</a> <a class="post-tag" href="/tags/level1/">level1</a> <a class="post-tag" href="/tags/anroid/">anroid</a> <a class="post-tag" href="/tags/implements/">implements</a> <a class="post-tag" href="/tags/greedy/">greedy</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-M2M35DP38G"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-M2M35DP38G'); }); </script>
